# AGENT.md — 作業ルール

本ドキュメントは、このリポジトリで作業する際の基本ルールを定めます。適用範囲はリポジトリ全体です。

## 1) Gitコミット運用
- こまめにコミットする
  - 小さな論理単位（ファイル/機能/修正ごと）でコミットし、混在させない。
  - 大規模変更は段階的に分割し、各段階でテスト可能な状態を保つ。
- メッセージは丁寧に作成する（意図と背景を明記）
  - 1行目: 要約（50文字前後、命令形で簡潔に）。
  - 本文: 何を、なぜ、どう検証したか（再現手順/影響範囲/代替案など）。
  - 関連: 関連Issue/PR番号、参考リンクを列挙。
  - 破壊的変更は本文末尾に `BREAKING CHANGE:` で明記。
- 禁止パターン
  - 「fix」「wip」など内容不明な要約のみ。
  - 1コミットに複数目的の混在（例: 仕様変更とリファクタと整形の同時実施）。
- 例（テンプレート）
  ```
  feat(ui): PPIグラフに中心性上位20のハイライトを追加
  
  - degree/betweenness/eigenvectorを算出し、上位20ノードをサイズ/色で強調
  - required_scoreの変更に連動して再描画されるようコールバックを調整
  - 代表IDセットで体感性能を確認（P50 1.8s, P95 7.5s）
  
  Related: #123
  ```

## 2) 進捗・Tipsドキュメントの整備
- ドキュメントをまとめる（継続的に蓄積）
  - 進捗・決定事項・ハマりどころ（tips）を短くても良いので都度残す。
  - 推奨配置: `docs/notes/` ディレクトリ。
- 更新タイミング
  - 作業開始時: その日の計画（Today/Goals）。
  - 主要な区切り/コミット後: 実施内容・観測結果（Done/Findings/Troubles）。
  - 終了時: 次やること・ブロッカー（Next/Blockers/Todo）。
- 命名・書式（推奨）
  - 進捗ログ: `docs/notes/YYYY-MM-DD-progress.md`
  - テーマ別Tips: `docs/notes/tips-<topic>.md`（例: `tips-string-api.md`）
  - セクション例:
    - Title / Date / Author
    - Today / Done / Findings / Tips / Blockers / Next
- 運用
  - PRの説明欄に関連ノートへのリンクを添付し、背景知識を共有する。
  - 例外（緊急修正など）で記載が遅れた場合は、後追いで要点だけでも必ず残す。

## 3) 改訂
- 本ルールはPR経由で改訂する。変更理由と適用範囲を明記すること。

